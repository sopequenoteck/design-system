# =============================================================================
# DOCKER COMPOSE - Showcase ds-angular
# Usage: docker compose up -d
# =============================================================================

services:
  showcase:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ds-angular-showcase
    ports:
      - "4300:80"
    restart: unless-stopped
    labels:
      - "app=ds-angular"
      - "component=showcase"
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:80/"]
      interval: 30s
      timeout: 3s
      start_period: 10s
      retries: 3

  # Service alternatif : utilise un build pr√©-existant (plus rapide)
  showcase-prebuilt:
    image: nginx:alpine
    container_name: ds-angular-showcase-prebuilt
    ports:
      - "4301:80"
    volumes:
      - ./dist/ds-showcase/browser:/usr/share/nginx/html:ro
    restart: unless-stopped
    profiles:
      - prebuilt
    labels:
      - "app=ds-angular"
      - "component=showcase-prebuilt"

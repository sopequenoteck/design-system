# =============================================================================
# DOCKER COMPOSE - Storybook ds-angular
# Usage: docker compose up -d
# =============================================================================

services:
  storybook:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ds-angular-storybook
    ports:
      - "6006:80"
    restart: unless-stopped
    labels:
      - "app=ds-angular"
      - "component=storybook"
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:80/"]
      interval: 30s
      timeout: 3s
      start_period: 10s
      retries: 3

  # Service alternatif : utilise un build pr√©-existant (plus rapide)
  storybook-prebuilt:
    image: nginx:alpine
    container_name: ds-angular-storybook-prebuilt
    ports:
      - "6007:80"
    volumes:
      - ./storybook-static:/usr/share/nginx/html:ro
    restart: unless-stopped
    profiles:
      - prebuilt
    labels:
      - "app=ds-angular"
      - "component=storybook-prebuilt"

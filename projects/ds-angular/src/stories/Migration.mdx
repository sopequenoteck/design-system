{/* Migration.mdx */}
import { Meta } from '@storybook/blocks';

<Meta title="Guides/Migration" />

# Guide de migration - DS Angular

Ce guide documente les changements majeurs entre les versions et les étapes de migration nécessaires.

---

## Migration v1.6 → v1.7

**Date de sortie** : Décembre 2025
**Type** : Minor release (nouvelles fonctionnalités, rétrocompatible)

### Nouvelles fonctionnalités

#### Composants ajoutés

Six nouveaux composants de navigation et listes :

1. **DsSidebar** : Navigation verticale avec mode collapsed
2. **DsNavList** : Liste de navigation avec badges et icônes
3. **DsCheckboxList** : Liste de checkboxes groupées
4. **DsList** : Conteneur liste avec loading, empty, drag & drop
5. **DsListItem** : Élément de liste avec checkbox et indicateurs
6. **DsListGroup** : Groupement de listes avec header collapsible

```typescript
import {
  DsSidebar,
  DsNavList,
  DsCheckboxList,
  DsList,
  DsListItem,
  DsListGroup
} from '@kksdev/ds-angular';
```

### Réorganisation Storybook

La sidebar Storybook a été réorganisée style CoreUI à 3 niveaux :

- `Components/Data Display` → `Components/Data`
- `Components/Forms/CheckboxList` → `Forms/Input Controls/Checkbox List`
- `Components/Navigation/DsSidebar` → `Components/Navigation/Sidebar`

### Actions requises

```bash
npm install @kksdev/ds-angular@1.7.0
```

---

## Migration v1.2 → v1.3

**Date de sortie** : Décembre 2025
**Type** : Minor release (nouvelles fonctionnalités, rétrocompatible)

### Nouvelles fonctionnalités

#### Composants ajoutés (SPRINT-001)

Trois nouveaux composants formulaires :

1. **DsChip** : Étiquettes interactives avec support removable et selectable
2. **DsSlider** : Sélecteur de valeur numérique (simple et range)
3. **DsFileUpload** : Upload de fichiers avec drag & drop et preview

```typescript
import { DsChip, DsSlider, DsFileUpload } from '@kksdev/ds-angular';

@Component({
  standalone: true,
  imports: [DsChip, DsSlider, DsFileUpload],
  template: `
    <ds-chip color="primary" [removable]="true">Angular 20</ds-chip>
    <ds-slider [min]="0" [max]="100" [(value)]="volume" />
    <ds-file-upload [accept]="'image/*'" [multiple]="true" />
  `
})
export class MyComponent {
  volume = 50;
}
```

#### Nouveaux tokens SPRINT-001

| Groupe | Tokens | Exemples |
|--------|--------|----------|
| **Chip** | 16 | `--chip-height-{sm\|md\|lg}`, `--chip-border-radius` |
| **Slider** | 16 | `--slider-track-height-{sm\|md\|lg}`, `--slider-thumb-size-*` |
| **File Upload** | 18 | `--file-upload-min-height-*`, `--file-upload-radius` |

Tous disponibles dans les 3 thèmes (light, dark, custom).

### Actions requises

```bash
npm install @kksdev/ds-angular@1.3.0
```

---

## Migration v1.1 → v1.2

**Date de sortie** : Décembre 2025
**Type** : Minor release

### Changements majeurs

#### Upgrade FontAwesome v7

- `@fortawesome/fontawesome-svg-core` : v6 → v7
- `@fortawesome/angular-fontawesome` : v2 → v3

**Action requise** : Aucune, les icônes sont gérées en interne par `IconRegistryService`.

#### Tokens thématiques pour 8 composants

Ajout de tokens dans `_light.scss` et `_dark.scss` pour :
- `ds-card`, `ds-alert`, `ds-divider`, `ds-select`
- `ds-table`, `ds-combobox`, `ds-progress-bar`, `ds-skeleton`

**Impact** : Les composants respectent automatiquement le thème actif.

---

## Migration v1.0 → v1.1

**Date de sortie** : Décembre 2025
**Type** : Minor release

### Changements majeurs

#### Renommage du package npm

Le package a été renommé de `ds-angular` à `@kksdev/ds-angular`.

**Action requise** :

```bash
# Désinstaller l'ancien package
npm uninstall ds-angular

# Installer le nouveau
npm install @kksdev/ds-angular
```

Mettez à jour tous les imports :

```typescript
// Avant
import { DsButton } from 'ds-angular';

// Après
import { DsButton } from '@kksdev/ds-angular';
```

```scss
// Avant
@use 'ds-angular/styles';

// Après
@use '@kksdev/ds-angular/styles';
```

#### Nouveaux composants v1.1

- `DsAvatar` : Affichage photo/initiales utilisateur
- `DsMenu` : Menu contextuel avec items et dividers

---

## Support

Pour toute question sur la migration :

- **Storybook** : Documentation interactive (`npm run storybook`)
- **Issues GitHub** : [github.com/sopequenoteck/design-system/issues](https://github.com/sopequenoteck/design-system/issues)
- **CHANGELOG.md** : Historique détaillé des versions

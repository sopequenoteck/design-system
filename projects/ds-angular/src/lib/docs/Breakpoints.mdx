{/* Breakpoints.mdx */}
import { Meta } from '@storybook/blocks';

<Meta title="Foundation/Breakpoints" />

# Breakpoints

Points de rupture pour le responsive design.

---

## Valeurs

<div style={{
  display: 'flex',
  flexDirection: 'column',
  gap: '8px',
  marginBottom: '32px'
}}>
  {[
    { name: 'xs', value: '320px', desc: 'Petits mobiles', color: '#ef4444' },
    { name: 'sm', value: '576px', desc: 'Mobiles', color: '#f59e0b' },
    { name: 'md', value: '768px', desc: 'Tablettes', color: '#10b981' },
    { name: 'lg', value: '992px', desc: 'Desktop', color: '#3b82f6' },
    { name: 'xl', value: '1200px', desc: 'Large desktop', color: '#8b5cf6' },
    { name: '2xl', value: '1400px', desc: 'Extra large', color: '#ec4899' },
  ].map(({ name, value, desc, color }) => (
    <div key={name} style={{
      display: 'flex',
      alignItems: 'center',
      gap: '16px',
      padding: '12px 16px',
      background: 'var(--background-secondary)',
      borderRadius: '8px'
    }}>
      <div style={{
        width: '8px',
        height: '32px',
        background: color,
        borderRadius: '4px'
      }} />
      <code style={{ fontSize: '13px', minWidth: '160px', fontWeight: '600' }}>--breakpoint-{name}</code>
      <div style={{
        flex: 1,
        height: '8px',
        background: 'var(--gray-200)',
        borderRadius: '4px',
        overflow: 'hidden'
      }}>
        <div style={{
          width: `${parseInt(value) / 14}%`,
          height: '100%',
          background: color,
          borderRadius: '4px'
        }} />
      </div>
      <span style={{ fontSize: '14px', fontWeight: '600', minWidth: '60px' }}>{value}</span>
      <span style={{ fontSize: '13px', color: 'var(--text-muted)', minWidth: '100px' }}>{desc}</span>
    </div>
  ))}
</div>

---

## Variables SCSS

```scss
// Définition dans _primitives.scss
$breakpoint-xs: 320px;
$breakpoint-sm: 576px;
$breakpoint-md: 768px;
$breakpoint-lg: 992px;
$breakpoint-xl: 1200px;
$breakpoint-2xl: 1400px;
```

---

## CSS Custom Properties

```css
:root {
  --breakpoint-xs: 320px;
  --breakpoint-sm: 576px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 992px;
  --breakpoint-xl: 1200px;
  --breakpoint-2xl: 1400px;
}
```

> **Note** : Les CSS variables ne peuvent pas être utilisées directement dans `@media`. Utilisez les valeurs en pixels ou les variables SCSS.

---

## Utilisation dans les Media Queries

### SCSS (recommandé)

```scss
@use '@kksdev/ds-angular/styles/tokens/primitives' as bp;

.my-component {
  padding: 16px;

  @media (min-width: bp.$breakpoint-md) {
    padding: 24px;
  }

  @media (min-width: bp.$breakpoint-lg) {
    padding: 32px;
  }
}
```

### CSS pur

```css
.my-component {
  padding: 16px;
}

@media (min-width: 768px) {
  .my-component {
    padding: 24px;
  }
}

@media (min-width: 992px) {
  .my-component {
    padding: 32px;
  }
}
```

---

## Mixins utilitaires

### Mixin media-up

```scss
@mixin media-up($breakpoint) {
  @media (min-width: $breakpoint) {
    @content;
  }
}

// Utilisation
.component {
  @include media-up($breakpoint-md) {
    display: flex;
  }
}
```

### Mixin media-down

```scss
@mixin media-down($breakpoint) {
  @media (max-width: ($breakpoint - 1px)) {
    @content;
  }
}

// Utilisation
.mobile-only {
  @include media-down($breakpoint-md) {
    display: block;
  }
}
```

### Mixin media-between

```scss
@mixin media-between($min, $max) {
  @media (min-width: $min) and (max-width: ($max - 1px)) {
    @content;
  }
}

// Utilisation
.tablet-only {
  @include media-between($breakpoint-md, $breakpoint-lg) {
    display: block;
  }
}
```

---

## Patterns responsive courants

### Navigation adaptative

```scss
.nav {
  // Mobile : menu hamburger
  @media (max-width: 767px) {
    .nav-menu { display: none; }
    .nav-toggle { display: block; }
  }

  // Desktop : menu horizontal
  @media (min-width: 768px) {
    .nav-menu { display: flex; }
    .nav-toggle { display: none; }
  }
}
```

### Grille responsive

```scss
.grid {
  display: grid;
  gap: 16px;

  // 1 colonne mobile
  grid-template-columns: 1fr;

  // 2 colonnes tablette
  @media (min-width: 768px) {
    grid-template-columns: repeat(2, 1fr);
  }

  // 3 colonnes desktop
  @media (min-width: 992px) {
    grid-template-columns: repeat(3, 1fr);
  }

  // 4 colonnes large
  @media (min-width: 1200px) {
    grid-template-columns: repeat(4, 1fr);
  }
}
```

### Typographie responsive

```scss
.title {
  font-size: 1.5rem;  // 24px mobile

  @media (min-width: 768px) {
    font-size: 2rem;  // 32px tablette
  }

  @media (min-width: 992px) {
    font-size: 2.5rem;  // 40px desktop
  }
}
```

---

## Container Queries (CSS moderne)

Pour les composants qui doivent réagir à leur container plutôt qu'au viewport :

```css
.card-container {
  container-type: inline-size;
}

.card {
  /* Mobile par défaut */
  flex-direction: column;
}

@container (min-width: 400px) {
  .card {
    flex-direction: row;
  }
}
```

---

## JavaScript : Détection de breakpoint

```typescript
import { Injectable, signal } from '@angular/core';

@Injectable({ providedIn: 'root' })
export class BreakpointService {
  private breakpoints = {
    xs: 320,
    sm: 576,
    md: 768,
    lg: 992,
    xl: 1200,
    '2xl': 1400
  };

  readonly currentBreakpoint = signal<string>('xs');
  readonly isMobile = signal(true);
  readonly isTablet = signal(false);
  readonly isDesktop = signal(false);

  constructor() {
    this.checkBreakpoint();
    window.addEventListener('resize', () => this.checkBreakpoint());
  }

  private checkBreakpoint() {
    const width = window.innerWidth;

    if (width >= this.breakpoints['2xl']) {
      this.currentBreakpoint.set('2xl');
    } else if (width >= this.breakpoints.xl) {
      this.currentBreakpoint.set('xl');
    } else if (width >= this.breakpoints.lg) {
      this.currentBreakpoint.set('lg');
    } else if (width >= this.breakpoints.md) {
      this.currentBreakpoint.set('md');
    } else if (width >= this.breakpoints.sm) {
      this.currentBreakpoint.set('sm');
    } else {
      this.currentBreakpoint.set('xs');
    }

    this.isMobile.set(width < this.breakpoints.md);
    this.isTablet.set(width >= this.breakpoints.md && width < this.breakpoints.lg);
    this.isDesktop.set(width >= this.breakpoints.lg);
  }
}
```

---

## Bonnes pratiques

1. **Mobile-first** : Écrivez les styles mobile par défaut, puis ajoutez les breakpoints avec `min-width`
2. **Évitez trop de breakpoints** : 3-4 breakpoints suffisent généralement
3. **Testez sur vrais appareils** : Les émulateurs ne reproduisent pas tout
4. **Contenus flexibles** : Utilisez `max-width`, `flex`, `grid` plutôt que des largeurs fixes
5. **Images responsive** : Utilisez `srcset` ou `picture` pour les images

{/* Theming.mdx */}
import { Meta } from '@storybook/blocks';

<Meta title="Customize/Theming" />

# Theming

Guide complet pour utiliser et cr√©er des th√®mes dans DS-Angular.

---

## Th√®mes disponibles

Le design system propose 3 th√®mes pr√™ts √† l'emploi :

<div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '16px', marginBottom: '32px' }}>
  <div style={{
    padding: '24px',
    background: '#ffffff',
    borderRadius: '12px',
    textAlign: 'center',
    border: '2px solid #e5e7eb'
  }}>
    <div style={{ fontSize: '32px', marginBottom: '8px' }}>‚òÄÔ∏è</div>
    <strong style={{ color: '#1f2937' }}>Light</strong>
    <code style={{ fontSize: '11px', display: 'block', marginTop: '8px', color: '#6b7280' }}>theme-light</code>
  </div>
  <div style={{
    padding: '24px',
    background: '#1f2937',
    borderRadius: '12px',
    textAlign: 'center',
    border: '2px solid #374151'
  }}>
    <div style={{ fontSize: '32px', marginBottom: '8px' }}>üåô</div>
    <strong style={{ color: '#f9fafb' }}>Dark</strong>
    <code style={{ fontSize: '11px', display: 'block', marginTop: '8px', color: '#9ca3af' }}>theme-dark</code>
  </div>
  <div style={{
    padding: '24px',
    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
    borderRadius: '12px',
    textAlign: 'center',
    border: '2px solid #7c3aed'
  }}>
    <div style={{ fontSize: '32px', marginBottom: '8px' }}>üé®</div>
    <strong style={{ color: '#ffffff' }}>Custom</strong>
    <code style={{ fontSize: '11px', display: 'block', marginTop: '8px', color: '#e0e7ff' }}>theme-custom</code>
  </div>
</div>

---

## Activation d'un th√®me

### Via classe CSS

```typescript
// Dans app.component.ts ou main.ts
document.documentElement.className = 'theme-light';
document.documentElement.className = 'theme-dark';
document.documentElement.className = 'theme-custom';
```

### Service de th√®me

```typescript
import { Injectable, signal } from '@angular/core';

@Injectable({ providedIn: 'root' })
export class ThemeService {
  private currentTheme = signal<'light' | 'dark' | 'custom'>('light');

  readonly theme = this.currentTheme.asReadonly();

  setTheme(theme: 'light' | 'dark' | 'custom') {
    this.currentTheme.set(theme);
    document.documentElement.className = `theme-${theme}`;
    localStorage.setItem('ds-theme', theme);
  }

  initTheme() {
    const saved = localStorage.getItem('ds-theme') as 'light' | 'dark' | 'custom';
    if (saved) {
      this.setTheme(saved);
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      this.setTheme('dark');
    }
  }
}
```

### D√©tection automatique du syst√®me

```typescript
// √âcoute les changements de pr√©f√©rence syst√®me
window.matchMedia('(prefers-color-scheme: dark)')
  .addEventListener('change', (e) => {
    this.themeService.setTheme(e.matches ? 'dark' : 'light');
  });
```

---

## Cr√©er un th√®me personnalis√©

### 1. Cr√©er le fichier de th√®me

```scss
// src/styles/themes/_my-brand.scss
:root.theme-my-brand {
  // Couleurs principales
  --color-primary: #your-brand-color;
  --color-secondary: #your-secondary;
  --color-alt: #your-accent;

  // Backgrounds
  --background-main: #ffffff;
  --background-secondary: #f8f9fa;
  --background-tertiary: #e9ecef;

  // Textes
  --text-default: #212529;
  --text-muted: #6c757d;

  // Bordures
  --border-color: #dee2e6;

  // Composants (optionnel)
  --btn-radius: 4px;
  --card-radius: 8px;
  --input-border-radius: 4px;
}
```

### 2. Importer le th√®me

```scss
// src/styles.scss
@use '@kksdev/ds-angular/styles';
@use './styles/themes/my-brand';
```

### 3. Activer le th√®me

```typescript
document.documentElement.className = 'theme-my-brand';
```

---

## Variables th√©matiques

Voici les variables √† d√©finir pour un th√®me complet :

### Essentielles (obligatoires)

```scss
:root.theme-* {
  // Backgrounds
  --background-main: ...;
  --background-secondary: ...;

  // Textes
  --text-default: ...;
  --text-muted: ...;

  // Bordures
  --border-color: ...;
}
```

### Composants (optionnelles)

```scss
:root.theme-* {
  // Inputs
  --input-bg: ...;
  --input-border-color: ...;
  --input-text: ...;
  --input-placeholder: ...;

  // Cards
  --card-bg: ...;
  --card-border: ...;
  --card-shadow: ...;

  // Modals
  --modal-bg: ...;
  --modal-overlay-bg: ...;

  // Tables
  --table-bg: ...;
  --table-header-bg: ...;
  --table-row-hover: ...;
  --table-border: ...;
}
```

---

## Exemple : Th√®me "Ocean"

```scss
:root.theme-ocean {
  // Palette oc√©an
  --color-primary: #0077b6;
  --color-secondary: #00b4d8;
  --color-alt: #90e0ef;

  // Backgrounds avec teinte bleue
  --background-main: #f0f9ff;
  --background-secondary: #e0f2fe;
  --background-tertiary: #bae6fd;

  // Textes
  --text-default: #0c4a6e;
  --text-muted: #0369a1;

  // Bordures
  --border-color: #7dd3fc;

  // Couleurs s√©mantiques
  --success: #059669;
  --warning: #d97706;
  --error: #dc2626;
  --info: #0284c7;

  // Composants
  --btn-radius: 24px;
  --card-radius: 16px;
  --card-shadow: 0 4px 20px rgba(0, 119, 182, 0.15);
}
```

---

## Th√®me Dark personnalis√©

```scss
:root.theme-midnight {
  // Backgrounds sombres
  --background-main: #0f172a;
  --background-secondary: #1e293b;
  --background-tertiary: #334155;

  // Textes clairs
  --text-default: #f1f5f9;
  --text-muted: #94a3b8;

  // Accent n√©on
  --color-primary: #22d3ee;
  --color-secondary: #a78bfa;
  --color-alt: #f472b6;

  // Bordures subtiles
  --border-color: #475569;

  // Ombres pour dark mode
  --shadow-1: 0 1px 3px rgba(0, 0, 0, 0.3);
  --shadow-2: 0 4px 6px rgba(0, 0, 0, 0.4);
  --shadow-3: 0 10px 25px rgba(0, 0, 0, 0.5);
}
```

---

## Composant ThemeSwitcher

```typescript
import { Component, inject } from '@angular/core';
import { DsSegmentedControl } from '@kksdev/ds-angular';
import { ThemeService } from './theme.service';

@Component({
  standalone: true,
  imports: [DsSegmentedControl],
  template: `
    <ds-segmented-control
      [ngModel]="themeService.theme()"
      [options]="options"
      (ngModelChange)="themeService.setTheme($event)"
    />
  `
})
export class ThemeSwitcherComponent {
  themeService = inject(ThemeService);

  options = [
    { value: 'light', label: '‚òÄÔ∏è Light' },
    { value: 'dark', label: 'üåô Dark' },
    { value: 'custom', label: 'üé® Custom' },
  ];
}
```

---

## Bonnes pratiques

1. **Testez l'accessibilit√©** : V√©rifiez les contrastes WCAG 2.1 AA
2. **Coh√©rence** : Gardez une logique entre les couleurs
3. **Fallbacks** : Fournissez des valeurs par d√©faut
4. **Performance** : √âvitez trop de variables sur les composants enfants
5. **Documentation** : Documentez vos choix de couleurs

/**
 * DS Stepper — Composant de navigation par étapes
 *
 * Utilise les tokens CSS custom properties pour garantir la cohérence thématique.
 */

.ds-stepper {
  display: flex;
  font-family: var(--font-family-base);

  // Orientation horizontale
  &--horizontal {
    flex-direction: row;
    align-items: flex-start;

    .ds-stepper__step {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .ds-stepper__connector {
      flex: 1;
      height: var(--stepper-connector-width);
      min-width: var(--stepper-connector-min-length);
      margin-top: calc(var(--stepper-indicator-size-md) / 2);
      background-color: var(--stepper-connector-color, var(--border-color));

      &--completed {
        background-color: var(--stepper-completed-bg, var(--success));
      }
    }

    .ds-stepper__content {
      margin-top: var(--stepper-gap-horizontal, var(--space-2));
    }
  }

  // Orientation verticale
  &--vertical {
    flex-direction: column;

    .ds-stepper__step {
      flex-direction: row;
      align-items: flex-start;
    }

    .ds-stepper__connector {
      width: var(--stepper-connector-width);
      min-height: var(--stepper-connector-min-length);
      margin-left: calc(var(--stepper-indicator-size-md) / 2);
      margin-top: var(--space-1);
      margin-bottom: var(--space-1);
      background-color: var(--stepper-connector-color, var(--border-color));

      &--completed {
        background-color: var(--stepper-completed-bg, var(--success));
      }
    }

    .ds-stepper__content {
      margin-left: var(--stepper-gap-vertical, var(--space-3));
    }
  }

  // Clickable
  &--clickable {
    .ds-stepper__step:not(.ds-stepper__step--disabled) {
      cursor: pointer;

      &:hover .ds-stepper__indicator {
        transform: scale(1.1);
      }
    }
  }

  // Étape
  &__step {
    display: flex;
    outline: none;
    transition: opacity var(--duration-fast) var(--easing-default);

    &:focus-visible .ds-stepper__indicator {
      box-shadow: 0 0 0 2px var(--background-main, #fff), 0 0 0 4px var(--color-primary);
    }

    &--pending {
      .ds-stepper__indicator {
        background-color: var(--stepper-pending-bg, var(--background-secondary));
        color: var(--stepper-pending-text, var(--text-muted));
        border-color: var(--stepper-pending-border, var(--border-color));
      }

      .ds-stepper__label {
        color: var(--stepper-pending-text, var(--text-muted));
      }
    }

    &--active {
      .ds-stepper__indicator {
        background-color: var(--stepper-active-bg, var(--color-primary));
        color: var(--stepper-active-text, var(--gray-50));
        border-color: var(--stepper-active-bg, var(--color-primary));
      }

      .ds-stepper__label {
        color: var(--text-default);
        font-weight: var(--font-weight-semibold);
      }
    }

    &--completed {
      .ds-stepper__indicator {
        background-color: var(--stepper-completed-bg, var(--success));
        color: var(--stepper-completed-text, var(--gray-50));
        border-color: var(--stepper-completed-bg, var(--success));
      }

      .ds-stepper__label {
        color: var(--text-default);
      }
    }

    &--error {
      .ds-stepper__indicator {
        background-color: var(--stepper-error-bg, var(--error));
        color: var(--stepper-error-text, var(--gray-50));
        border-color: var(--stepper-error-bg, var(--error));
      }

      .ds-stepper__label {
        color: var(--stepper-error-bg, var(--error));
      }
    }

    &--disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  // Indicateur (cercle avec numéro ou icône)
  &__indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--stepper-indicator-size-md);
    height: var(--stepper-indicator-size-md);
    border-radius: 50%;
    border: var(--stepper-indicator-border-width) solid;
    font-weight: var(--font-weight-semibold);
    font-size: var(--stepper-indicator-font-size-md, var(--font-size-2));
    flex-shrink: 0;
    transition:
      transform var(--duration-fast) var(--easing-default),
      background-color var(--duration-fast) var(--easing-default),
      border-color var(--duration-fast) var(--easing-default),
      box-shadow var(--duration-fast) var(--easing-default);
  }

  &__number {
    line-height: 1;
  }

  // Contenu
  &__content {
    display: flex;
    flex-direction: column;
  }

  &__label {
    font-size: var(--stepper-label-font-size-md, var(--font-size-2));
    font-weight: var(--font-weight-medium);
    color: var(--text-default);
    transition: color var(--duration-fast) var(--easing-default);
  }

  &__optional {
    font-size: var(--stepper-description-font-size-md, var(--font-size-1));
    font-weight: var(--font-weight-normal);
    color: var(--text-subtle);
    margin-left: var(--space-1);
  }

  &__description {
    font-size: var(--stepper-description-font-size-md, var(--font-size-1));
    color: var(--text-muted);
    margin-top: var(--space-1);
  }

  // Connecteur
  &__connector {
    transition: background-color var(--duration-normal) var(--easing-default);
  }

  // Taille SM
  &--sm {
    .ds-stepper__indicator {
      width: var(--stepper-indicator-size-sm);
      height: var(--stepper-indicator-size-sm);
      font-size: var(--stepper-indicator-font-size-sm, var(--font-size-1));
    }

    .ds-stepper__label {
      font-size: var(--stepper-label-font-size-sm, var(--font-size-1));
    }

    .ds-stepper__description {
      font-size: var(--stepper-description-font-size-sm, var(--font-size-small));
    }

    &.ds-stepper--horizontal .ds-stepper__connector {
      margin-top: calc(var(--stepper-indicator-size-sm) / 2);
    }

    &.ds-stepper--vertical .ds-stepper__connector {
      margin-left: calc(var(--stepper-indicator-size-sm) / 2);
    }
  }

  // Taille LG
  &--lg {
    .ds-stepper__indicator {
      width: var(--stepper-indicator-size-lg);
      height: var(--stepper-indicator-size-lg);
      font-size: var(--stepper-indicator-font-size-lg, var(--font-size-3));
    }

    .ds-stepper__label {
      font-size: var(--stepper-label-font-size-lg, var(--font-size-3));
    }

    .ds-stepper__description {
      font-size: var(--stepper-description-font-size-lg, var(--font-size-2));
    }

    &.ds-stepper--horizontal .ds-stepper__connector {
      margin-top: calc(var(--stepper-indicator-size-lg) / 2);
    }

    &.ds-stepper--vertical .ds-stepper__connector {
      margin-left: calc(var(--stepper-indicator-size-lg) / 2);
    }
  }
}

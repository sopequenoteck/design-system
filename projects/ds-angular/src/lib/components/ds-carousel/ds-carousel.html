<div
  [class]="containerClasses()"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
  (keydown)="onKeydown($event)"
  (touchstart)="onTouchStart($event)"
  (touchmove)="onTouchMove($event)"
  (touchend)="onTouchEnd($event)"
  tabindex="0"
  role="region"
  aria-roledescription="carousel"
  [attr.aria-label]="'Carousel with ' + slides().length + ' slides'"
>
  <!-- Arrows -->
  @if (arrows() && slides().length > 1) {
    <button
      class="ds-carousel__arrow ds-carousel__arrow--left"
      (click)="prev()"
      [attr.aria-label]="'Previous slide'"
      type="button"
    >
      <fa-icon [icon]="icons.left" />
    </button>

    <button
      class="ds-carousel__arrow ds-carousel__arrow--right"
      (click)="next()"
      [attr.aria-label]="'Next slide'"
      type="button"
    >
      <fa-icon [icon]="icons.right" />
    </button>
  }

  <!-- Slides container -->
  <div class="ds-carousel__container">
    <div
      class="ds-carousel__track"
      #track
      [ngStyle]="trackStyle()"
      role="list"
    >
      @for (slide of slides(); track slide.id; let i = $index) {
        <div
          class="{{ slideClasses(i) }}"
          #slideElement
          role="listitem"
          [attr.aria-hidden]="i !== internalActiveIndex()"
          [attr.aria-label]="'Slide ' + (i + 1) + ' of ' + slides().length"
        >
          @if (slide.image) {
            <img
              [src]="slide.image"
              [alt]="slide.alt || slide.title || 'Slide ' + (i + 1)"
              class="ds-carousel__image"
            />
          }

          @if (slide.title || slide.description) {
            <div class="ds-carousel__content">
              @if (slide.title) {
                <h3 class="ds-carousel__title">{{ slide.title }}</h3>
              }
              @if (slide.description) {
                <p class="ds-carousel__description">{{ slide.description }}</p>
              }
            </div>
          }

          <!-- Content projection for custom slides -->
          <ng-content select="[carousel-slide]" />
        </div>
      }
    </div>
  </div>

  <!-- Dots -->
  @if (dots() && slides().length > 1) {
    <div
      class="ds-carousel__dots"
      role="tablist"
      [attr.aria-label]="'Carousel navigation'"
    >
      @for (slide of slides(); track slide.id; let i = $index) {
        <button
          type="button"
          [class]="dotClasses(i)"
          (click)="goTo(i)"
          role="tab"
          [attr.aria-selected]="i === internalActiveIndex()"
          [attr.aria-label]="'Go to slide ' + (i + 1)"
          [attr.aria-controls]="'carousel-slide-' + i"
        >
          <span class="ds-carousel__dot-inner"></span>
        </button>
      }
    </div>
  }
</div>

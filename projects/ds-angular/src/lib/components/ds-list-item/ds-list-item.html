<div
  [class]="itemClasses()"
  [attr.role]="role()"
  [attr.tabindex]="tabindex()"
  [attr.aria-disabled]="disabled() || null"
  [attr.aria-selected]="selected() || null"
  (click)="handleClick($event)"
  (keydown)="handleKeyDown($event)"
>
  <!-- Indicateur de priorité/statut (toute la hauteur) -->
  @if (showIndicator()) {
    <span
      class="ds-list-item__indicator"
      [class.ds-list-item__indicator--bar]="isBarIndicator()"
      [class.ds-list-item__indicator--dot]="isDotIndicator()"
      [style.--indicator-color]="resolveIndicatorColor()"
      aria-hidden="true"
    ></span>
  }

  <!-- Wrapper des lignes -->
  <div class="ds-list-item__wrapper">
    <!-- Ligne 1 : Checkbox + Titre + Meta + Actions -->
    <div class="ds-list-item__row ds-list-item__row--primary">
      <!-- Checkbox -->
      @if (checkable()) {
        <primitive-checkbox
          class="ds-list-item__checkbox"
          [checked]="checked()"
          [indeterminate]="indeterminate()"
          [disabled]="disabled()"
          size="sm"
          (checkedChange)="handleCheckedChange($event)"
          (click)="$event.stopPropagation()"
        />
      }

      <!-- Contenu principal -->
      <div class="ds-list-item__content">
        <span class="ds-list-item__title">{{ title() }}</span>

        @if (subtitle()) {
          <span class="ds-list-item__subtitle">{{ subtitle() }}</span>
        }

        <!-- Slot pour contenu additionnel inline (tags, badges) -->
        <ng-content select="[inline]" />
      </div>

      <!-- Zone de métadonnées (time, duration, etc.) -->
      <div class="ds-list-item__meta">
        <ng-content select="[meta]" />
      </div>

      <!-- Actions (boutons, menus) - visibles au hover -->
      <div class="ds-list-item__actions">
        <ng-content select="[actions]" />
      </div>
    </div>

    <!-- Ligne 2 : Contenu secondaire (optionnel) -->
    <div class="ds-list-item__row ds-list-item__row--secondary">
      <ng-content select="[secondary]" />
    </div>
  </div>
</div>

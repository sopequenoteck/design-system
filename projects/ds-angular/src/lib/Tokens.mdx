{/* Tokens.mdx */}
import { Meta } from '@storybook/blocks';

<Meta title="Tokens" />

# Tokens du design system

Les tokens sont la source de vérité pour la couleur, la typographie et l'espacement. Ils sont exposés sous forme de variables CSS et utilisés par les composants comme par vos applications Angular.

## Palette principale

| Token               | Valeur    | Usage                        | Aperçu                                                                                                                            |
|---------------------|-----------|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| `--color-primary`   | `#7d4bc0` | Actions principales, liens   | <span style={{background: 'var(--color-primary)', padding: '4px 12px', color: 'white', borderRadius: '6px'}}>Primary</span>       |
| `--color-secondary` | `#fbc224` | Accentuation, surlignage     | <span style={{background: 'var(--color-secondary)', padding: '4px 12px', color: '#1a1c22', borderRadius: '6px'}}>Secondary</span> |
| `--color-alt`       | `#2dd4bf` | Alternative, succès léger    | <span style={{background: 'var(--color-alt)', padding: '4px 12px', color: '#0f172a', borderRadius: '6px'}}>Alt</span>             |
| `--success`         | `#4caf50` | Statuts positifs             | <span style={{background: 'var(--success)', padding: '4px 12px', color: 'white', borderRadius: '6px'}}>Success</span>             |
| `--warning`         | `#ff9800` | Alerte/attention             | <span style={{background: 'var(--warning)', padding: '4px 12px', color: '#1a1c22', borderRadius: '6px'}}>Warning</span>           |
| `--error`           | `#f44336` | Erreur ou action destructive | <span style={{background: 'var(--error)', padding: '4px 12px', color: 'white', borderRadius: '6px'}}>Error</span>                 |
| `--info`            | `#2196f3` | Informations neutres         | <span style={{background: 'var(--info)', padding: '4px 12px', color: 'white', borderRadius: '6px'}}>Info</span>                   |

### Nuances de gris

| Token        | Valeur    | Aperçu                                                                                                                                      |
|--------------|-----------|---------------------------------------------------------------------------------------------------------------------------------------------|
| `--gray-50`  | `#fafafa` | <span style={{background: 'var(--gray-50)', padding: '4px 18px', border: '1px solid #e5e7eb', borderRadius: '4px'}}>UI subtle</span>        |
| `--gray-200` | `#e5e5e5` | <span style={{background: 'var(--gray-200)', padding: '4px 18px', border: '1px solid #d1d5db', borderRadius: '4px'}}>Neutral borders</span> |
| `--gray-400` | `#a3a3a3` | <span style={{background: 'var(--gray-400)', padding: '4px 18px', color: '#0f172a', borderRadius: '4px'}}>Muted text</span>                 |
| `--gray-700` | `#404040` | <span style={{background: 'var(--gray-700)', padding: '4px 18px', color: 'white', borderRadius: '4px'}}>Body text</span>                    |
| `--gray-900` | `#171717` | <span style={{background: 'var(--gray-900)', padding: '4px 18px', color: 'white', borderRadius: '4px'}}>Inverse</span>                      |

---

## Typographie

La police par défaut est `var(--font-family-base)` (Poppins). Les tailles sont exposées en rem pour être responsives.

| Style     | Token                                      | Rendu                                                                                                                                                                                              |
|-----------|--------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Affichage | `--font-size-xxl` / `--font-weight-bold`   | <span style={{fontFamily: 'var(--font-family-base)', fontSize: 'var(--font-size-xxl)', fontWeight: 'var(--font-weight-bold)', letterSpacing: 'var(--letter-spacing-tight)'}}>Heading XXL</span>    |
| Titre     | `--font-size-l` / `--font-weight-semibold` | <span style={{fontFamily: 'var(--font-family-base)', fontSize: 'var(--font-size-l)', fontWeight: 'var(--font-weight-semibold)', lineHeight: 'var(--line-height-tight)'}}>Titre section</span>      |
| Corps     | `--font-size-3` / `--font-weight-normal`   | <span style={{fontFamily: 'var(--font-family-base)', fontSize: 'var(--font-size-3)', fontWeight: 'var(--font-weight-normal)', lineHeight: 'var(--line-height-normal)'}}>Texte par défaut</span>    |
| Légende   | `--font-size-2` / `--font-weight-medium`   | <span style={{fontFamily: 'var(--font-family-base)', fontSize: 'var(--font-size-2)', fontWeight: 'var(--font-weight-medium)', letterSpacing: 'var(--letter-spacing-wide)'}}>Légende / label</span> |

---

## Espacements

L'échelle d'espacement repose sur `--space-1` (4px). Combinez-les pour rythmer les interfaces et aligner les composants entre eux.

<div style={{display: 'flex', gap: '16px', alignItems: 'center', flexWrap: 'wrap'}}>
  <div style={{display: 'flex', alignItems: 'center', gap: '8px'}}>
    <div style={{width: '32px', height: '8px', background: 'var(--color-secondary)', borderRadius: '4px'}}></div>
    <span style={{fontSize: '14px'}}>--space-1 (4px)</span>
  </div>
  <div style={{display: 'flex', alignItems: 'center', gap: '8px'}}>
    <div style={{width: '48px', height: '12px', background: 'var(--color-secondary)', borderRadius: '4px'}}></div>
    <span style={{fontSize: '14px'}}>--space-2 (8px)</span>
  </div>
  <div style={{display: 'flex', alignItems: 'center', gap: '8px'}}>
    <div style={{width: '64px', height: '16px', background: 'var(--color-secondary)', borderRadius: '4px'}}></div>
    <span style={{fontSize: '14px'}}>--space-3 (12px)</span>
  </div>
  <div style={{display: 'flex', alignItems: 'center', gap: '8px'}}>
    <div style={{width: '88px', height: '20px', background: 'var(--color-secondary)', borderRadius: '4px'}}></div>
    <span style={{fontSize: '14px'}}>--space-4 (16px)</span>
  </div>
  <div style={{display: 'flex', alignItems: 'center', gap: '8px'}}>
    <div style={{width: '120px', height: '24px', background: 'var(--color-secondary)', borderRadius: '4px'}}></div>
    <span style={{fontSize: '14px'}}>--space-6 (24px)</span>
  </div>
  <div style={{display: 'flex', alignItems: 'center', gap: '8px'}}>
    <div style={{width: '160px', height: '28px', background: 'var(--color-secondary)', borderRadius: '4px'}}></div>
    <span style={{fontSize: '14px'}}>--space-8 (32px)</span>
  </div>
</div>

---

## Ombres et rayons

| Token                       | Valeur                        | Usage                   |
|-----------------------------|-------------------------------|-------------------------|
| `--radius-1` / `--radius-2` | `4px` / `8px`                 | Boutons, champs simples |
| `--radius-3`                | `12px`                        | Cartes, panneaux        |
| `--radius-round`            | `999px`                       | Badges pills, toggles   |
| `--shadow-1`                | `0 1px 2px rgba(0,0,0,.14)`   | Hover léger             |
| `--shadow-2`                | `0 6px 16px rgba(0,0,0,.18)`  | Éléments flottants      |
| `--shadow-3`                | `0 15px 40px rgba(0,0,0,.24)` | Dialogues modaux        |

---

## Règles de nommage

Le design system utilise une architecture de tokens à **trois couches** pour garantir cohérence, maintenabilité et flexibilité thématique.

### Hiérarchie des couches

```
_primitives.scss (SCSS variables)
    ↓
_semantic.scss (SCSS variables)
    ↓
_tokens.scss (CSS custom properties sur :root)
    ↓
themes/ (CSS custom properties sur :root.theme-*)
```

### 1. Tokens primitifs (`_primitives.scss`)

**Convention** : Variables SCSS brutes définissant les valeurs source (couleurs hex, tailles px/rem, durées ms).

**Exemples** :
```scss
$primary: #7d4bc0;
$gray-500: #737373;
$space-2: 8px;
$font-size-3: 1rem;
$duration-fast: 150ms;
```

**Règle** : Pas de référence à d'autres variables. Valeurs absolues uniquement.

### 2. Tokens sémantiques (`_semantic.scss`)

**Convention** : Variables SCSS mappant les primitifs vers des usages composant (tailles, dimensions, rayons).

**Exemples** :
```scss
$btn-height-md: 40px;
$input-border-radius: $radius-2;
$modal-padding: $space-4;
$badge-font-size-sm: $font-size-2;
```

**Règle** : Référencent `_primitives.scss`. Nommage `composant-propriété-variant`.

### 3. Tokens globaux (`_tokens.scss`)

**Convention** : CSS custom properties sur `:root` exposant les tokens SCSS au runtime. Consommés par tous les composants.

**Exemples** :
```css
:root {
  --color-primary: var(--role-primary);
  --btn-height-md: 40px;
  --space-2: 8px;
  --radius-2: 8px;
}
```

**Règle** : Interpolation SCSS `#{$variable}` ou référence à d'autres CSS vars `var(--token)`.

### 4. Tokens thématiques (`themes/_light.scss`, `_dark.scss`)

**Convention** : CSS custom properties sur `:root.theme-*` redéfinissant les tokens sémantiques par thème (couleurs, contrastes, backgrounds).

**Exemples** :
```css
:root.theme-light {
  --background-main: var(--gray-50);
  --text-default: var(--gray-900);
  --modal-bg: var(--surface-overlay);
  --btn-primary-bg: var(--color-primary);
}

:root.theme-dark {
  --background-main: var(--gray-900);
  --text-default: var(--gray-50);
  --modal-bg: var(--background-main);
  --btn-primary-bg: var(--color-primary);
}
```

**Règle** : Nommage sémantique cohérent entre thèmes. Utilise `color-mix()` pour variations dynamiques.

### Conventions de nommage

| Type                 | Pattern                                  | Exemple                                  |
|----------------------|------------------------------------------|------------------------------------------|
| Primitif couleur     | `$nom-valeur`                            | `$gray-700`, `$primary`                  |
| Primitif dimension   | `$propriété-valeur`                      | `$space-4`, `$radius-2`                  |
| Sémantique composant | `$composant-propriété-variant`           | `$btn-height-md`, `$input-border-radius` |
| Token global         | `--propriété` ou `--composant-propriété` | `--color-primary`, `--btn-height-md`     |
| Token thématique     | `--contexte-propriété`                   | `--background-main`, `--text-default`    |

### Politique de dépréciation

Les tokens obsolètes sont marqués avec `@deprecated`, une date d'expiration, et un fallback CSS :

```scss
/* @deprecated Utiliser --badge-bg à la place. Sera supprimé le 2025-06-01 */
--badge-bg-color: var(--badge-bg);
```

Après expiration, les tokens dépréciés sont supprimés. Les composants utilisent des **fallbacks CSS** pour éviter les régressions :

```css
background-color: var(--new-token, var(--old-token));
```

---

## Thèmes & Storybook

Activez le sélecteur de thème dans la toolbar Storybook pour visualiser les tokens en **Light** et **Dark**. Les tokens exposés via `:root` sont automatiquement recalculés selon le thème courant.

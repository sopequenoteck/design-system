/* ==========================================================================
   PRIMITIVE BUTTON  Composant de base
   ========================================================================== */

:host {
  display: inline-flex;
}

:host.block {
  display: flex;
  width: 100%;
}

:host.block button,
button.block {
  width: 100%;
}

button {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--btn-padding-vertical-md) var(--btn-padding-horizontal-md);
  border: 1px solid transparent;
  border-radius: var(--btn-radius);
  font-weight: var(--font-weight-medium);
  font-size: var(--btn-font-size-md);
  cursor: pointer;
  transition:
    background-color var(--duration-fast) var(--easing-default),
    border-color var(--duration-fast) var(--easing-default),
    color var(--duration-fast) var(--easing-default),
    box-shadow var(--duration-fast) var(--easing-default),
    transform var(--duration-fast) var(--easing-default);

  /* Focus ring moderne */
  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--background-main, #fff), 0 0 0 4px var(--btn-focus-outline, var(--color-primary));
  }

  /* Active state subtil */
  &:active:not(:disabled) {
    transform: scale(0.98);
  }
}

/* === VARIANTS === */

button.primary {
  background-color: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border-color: var(--btn-primary-border);
}

button.primary:hover:not(:disabled) {
  background-color: var(--btn-primary-hover-bg);
  color: var(--btn-primary-hover-text);
}

button.secondary {
  background-color: var(--btn-secondary-bg);
  color: var(--btn-secondary-text);
  border-color: var(--btn-secondary-border);
}

button.secondary:hover:not(:disabled) {
  background-color: var(--btn-secondary-hover-bg);
  color: var(--btn-secondary-hover-text);
}

button.ghost {
  background-color: var(--btn-ghost-bg);
  color: var(--btn-ghost-text);
  border-color: var(--btn-ghost-border);
}

button.ghost:hover:not(:disabled) {
  background-color: var(--btn-ghost-hover-bg);
  color: var(--btn-ghost-hover-text);
}

button.success {
  background-color: var(--btn-success-bg);
  color: var(--btn-success-text);
  border-color: var(--btn-success-border);
}

button.success:hover:not(:disabled) {
  background-color: var(--btn-success-hover-bg);
  color: var(--btn-success-hover-text);
}

button.warning {
  background-color: var(--btn-warning-bg);
  color: var(--btn-warning-text);
  border-color: var(--btn-warning-border);
}

button.warning:hover:not(:disabled) {
  background-color: var(--btn-warning-hover-bg);
  color: var(--btn-warning-hover-text);
}

button.error {
  background-color: var(--btn-error-bg);
  color: var(--btn-error-text);
  border-color: var(--btn-error-border);
}

button.error:hover:not(:disabled) {
  background-color: var(--btn-error-hover-bg);
  color: var(--btn-error-hover-text);
}

button.info {
  background-color: var(--btn-info-bg);
  color: var(--btn-info-text);
  border-color: var(--btn-info-border);
}

button.info:hover:not(:disabled) {
  background-color: var(--btn-info-hover-bg);
  color: var(--btn-info-hover-text);
}

/* === APPEARANCE: OUTLINE === */

button.outline {
  background-color: transparent;
  border: 1px solid currentColor;

  &.primary {
    color: var(--btn-primary-bg);
    border-color: var(--btn-primary-bg);

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, var(--btn-primary-bg) 15%, transparent);
    }
  }

  &.secondary {
    color: var(--btn-secondary-bg);
    border-color: var(--btn-secondary-bg);

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, var(--btn-secondary-bg) 15%, transparent);
    }
  }

  &.ghost {
    color: var(--btn-ghost-text);
    border-color: transparent;

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, var(--btn-ghost-bg) 15%, transparent);
      border-color: var(--btn-ghost-hover-bg);
    }
  }

  &.success {
    color: var(--btn-success-bg);
    border-color: var(--btn-success-bg);

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, var(--btn-success-bg) 15%, transparent);
    }
  }

  &.warning {
    color: var(--btn-warning-bg);
    border-color: var(--btn-warning-bg);

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, var(--btn-warning-bg) 15%, transparent);
    }
  }

  &.error {
    color: var(--btn-error-bg);
    border-color: var(--btn-error-bg);

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, var(--btn-error-bg) 15%, transparent);
    }
  }

  &.info {
    color: var(--btn-info-bg);
    border-color: var(--btn-info-bg);

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, var(--btn-info-bg) 15%, transparent);
    }
  }
}

/* === SIZES === */

button.sm {
  font-size: var(--btn-font-size-sm);
  padding: var(--btn-padding-vertical-sm) var(--btn-padding-horizontal-sm);
}

button.md {
  font-size: var(--btn-font-size-md);
  padding: var(--btn-padding-vertical-md) var(--btn-padding-horizontal-md);
}

button.lg {
  font-size: var(--btn-font-size-lg);
  padding: var(--btn-padding-vertical-lg) var(--btn-padding-horizontal-lg);
}

/* === DISABLED === */

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* === ICONS === */

.icon-start {
  margin-right: var(--space-1);
}

.icon-end {
  margin-left: var(--space-1);
}
